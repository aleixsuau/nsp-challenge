<p-table
  [value]="users"
  data-testid="users-list"
  *ngIf="users && departmentsList && currentDepartment"
>
  <ng-template pTemplate="header">
    <tr>
      <th>Id</th>
      <th>Name</th>
      <th>Email</th>
      <th>Edit</th>
      <th>Delete</th>
    </tr>
  </ng-template>
  <ng-template pTemplate="body" let-user>
    <tr data-testid="users-list-row">
      <td data-testid="user-id">{{ user.id }}</td>
      <td data-testid="user-name">{{ user.name }}</td>
      <td data-testid="user-email">{{ user.email }}</td>
      <td data-testid="user-edit">
        <button
          pButton
          label="Edit"
          (click)="openUserFormDialog(departmentsList, currentDepartment, user);"
          class="p-button-success mr-2"
          styleClass="p-button-sm"
          data-testid="users-list-edit-button"
          icon="pi pi-file-edit"
        >
          <i class="pi pi-edit"></i>
        </button>
      </td>
      <td data-testid="user-delete">
        <button
          pButton
          label="Delete"
          (click)="deleteUser(currentDepartment, user);"
          class="p-button-warning"
          styleClass="p-button-sm"
          data-testid="users-list-delete-button"
          icon="pi pi-trash"                 
        >
        </button>
      </td>
    </tr>
  </ng-template>
</p-table>
<div class="flex justify-content-end mt-4">
  <button
    pButton
    label="Add user"
    (click)="openUserFormDialog(departmentsList!, currentDepartment);"
    styleClass="p-button-sm"
    class="p-button-success"
    data-testid="users-list-user-add-button"
    icon="pi pi-plus-circle"
  >
  </button>
</div>     